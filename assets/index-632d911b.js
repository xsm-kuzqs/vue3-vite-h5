import{r as e,o as t,n as a,w as o,c as l,a as s,b as n,d as i,e as r,f as c,g as d,m as u,u as f,h as v,i as p,j as m,k as h,l as x,p as b,F as g,q as k,t as w,s as B,v as y,x as _,y as I,z as T,A as C,B as A,K as z,_ as D}from"./index-ccb8e6dd.js";import{o as S,w as j,a as R,u as P,i as H,b as O,c as V,n as $,m as F,d as L,e as q,f as E,g as K,h as G,j as J,k as M,l as N,p as Q,t as U,H as W,B as X,I as Y,q as Z,r as ee,s as te,v as ae,x as oe,y as le,z as se}from"./index-69da6260.js";import{c as ne}from"./interceptor-0740b122.js";function ie(s,n){const i=((l,s)=>{const n=e(),i=()=>{n.value=P(l).height};return t((()=>{if(a(i),s)for(let e=1;e<=3;e++)setTimeout(i,100*e)})),S((()=>a(i))),o([j,R],i),n})(s,!0);return e=>l("div",{class:n("placeholder"),style:{height:i.value?"".concat(i.value,"px"):void 0}},[e()])}const[re,ce]=V("sticky");const de=Q(i({name:re,props:{zIndex:$,position:F("top"),container:Object,offsetTop:L(0),offsetBottom:L(0)},emits:["scroll","change"],setup(t,{emit:i,slots:d}){const u=e(),f=q(u),v=r({fixed:!1,width:0,height:0,transform:0}),p=e(!1),m=c((()=>E("top"===t.position?t.offsetTop:t.offsetBottom))),h=c((()=>{if(p.value)return;const{fixed:e,height:t,width:a}=v;return e?{width:"".concat(a,"px"),height:"".concat(t,"px")}:void 0})),x=c((()=>{if(!v.fixed||p.value)return;const e=K(G(t.zIndex),{width:"".concat(v.width,"px"),height:"".concat(v.height,"px"),[t.position]:"".concat(m.value,"px")});return v.transform&&(e.transform="translate3d(0, ".concat(v.transform,"px, 0)")),e})),b=()=>{if(!u.value||M(u))return;const{container:e,position:a}=t,o=P(u),l=N(window);if(v.width=o.width,v.height=o.height,"top"===a)if(e){const t=P(e),a=t.bottom-m.value-v.height;v.fixed=m.value>o.top&&t.bottom>0,v.transform=a<0?a:0}else v.fixed=m.value>o.top;else{const{clientHeight:t}=document.documentElement;if(e){const a=P(e),l=t-a.top-m.value-v.height;v.fixed=t-m.value<o.bottom&&t>a.top,v.transform=l<0?-l:0}else v.fixed=t-m.value<o.bottom}(e=>{i("scroll",{scrollTop:e,isFixed:v.fixed})})(l)};return o((()=>v.fixed),(e=>i("change",e))),J("scroll",b,{target:f,passive:!0}),function(e,t){if(!H||!window.IntersectionObserver)return;const a=new IntersectionObserver((e=>{t(e[0].intersectionRatio>0)}),{root:document.body}),o=()=>{e.value&&a.unobserve(e.value)};s(o),n(o),O((()=>{e.value&&a.observe(e.value)}))}(u,b),o([j,R],(()=>{u.value&&!M(u)&&v.fixed&&(p.value=!0,a((()=>{const e=P(u);v.width=e.width,v.height=e.height,p.value=!1})))})),()=>{var e;return l("div",{ref:u,style:h.value},[l("div",{class:ce({fixed:v.fixed&&!p.value}),style:x.value},[null==(e=d.default)?void 0:e.call(d)])])}}})),[ue,fe]=V("nav-bar");const ve=Q(i({name:ue,props:{title:String,fixed:Boolean,zIndex:$,border:U,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:U},emits:["clickLeft","clickRight"],setup(t,{emit:a,slots:o}){const s=e(),n=ie(s,fe),i=e=>{t.leftDisabled||a("clickLeft",e)},r=e=>{t.rightDisabled||a("clickRight",e)},c=()=>{const{title:e,fixed:a,border:n,zIndex:c}=t,d=G(c),u=t.leftArrow||t.leftText||o.left,f=t.rightText||o.right;return l("div",{ref:s,style:d,class:[fe({fixed:a}),{[X]:n,"van-safe-area-top":t.safeAreaInsetTop}]},[l("div",{class:fe("content")},[u&&l("div",{class:[fe("left",{disabled:t.leftDisabled}),t.clickable&&!t.leftDisabled?W:""],onClick:i},[o.left?o.left():[t.leftArrow&&l(Y,{class:fe("arrow"),name:"arrow-left"},null),t.leftText&&l("span",{class:fe("text")},[t.leftText])]]),l("div",{class:[fe("title"),"van-ellipsis"]},[o.title?o.title():e]),f&&l("div",{class:[fe("right",{disabled:t.rightDisabled}),t.clickable&&!t.rightDisabled?W:""],onClick:r},[o.right?o.right():l("span",{class:fe("text")},[t.rightText])])])])};return()=>t.fixed&&t.placeholder?n(c):c()}})),[pe,me]=V("tabbar"),he={route:Boolean,fixed:U,border:U,zIndex:$,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:L(0),safeAreaInsetBottom:{type:Boolean,default:null}},xe=Symbol(pe);const be=Q(i({name:pe,props:he,emits:["change","update:modelValue"],setup(t,{emit:a,slots:o}){const s=e(),{linkChildren:n}=Z(xe),i=ie(s,me),r=()=>{var e;return null!=(e=t.safeAreaInsetBottom)?e:t.fixed},c=()=>{var e;const{fixed:a,zIndex:n,border:i}=t;return l("div",{ref:s,role:"tablist",style:G(n),class:[me({fixed:a}),{[ee]:i,"van-safe-area-bottom":r()}]},[null==(e=o.default)?void 0:e.call(o)])};return n({props:t,setActive:(e,o)=>{ne(t.beforeChange,{args:[e],done(){a("update:modelValue",e),a("change",e),o()}})}}),()=>t.fixed&&t.placeholder?i(c):c()}})),[ge,ke]=V("tabbar-item");const we=Q(i({name:ge,props:K({},te,{dot:Boolean,icon:String,name:$,badge:$,badgeProps:Object,iconPrefix:String}),emits:["click"],setup(e,{emit:t,slots:a}){const o=ae(),s=d().proxy,{parent:n,index:i}=oe(xe);if(!n)return;const r=c((()=>{var t;const{route:a,modelValue:o}=n.props;if(a&&"$route"in s){const{$route:t}=s,{to:a}=e,o=se(a)?a:{path:a};return!!t.matched.find((e=>{const t="path"in o&&o.path===e.path,a="name"in o&&o.name===e.name;return t||a}))}return(null!=(t=e.name)?t:i.value)===o})),f=a=>{var l;r.value||n.setActive(null!=(l=e.name)?l:i.value,o),t("click",a)},v=()=>a.icon?a.icon({active:r.value}):e.icon?l(Y,{name:e.icon,classPrefix:e.iconPrefix},null):void 0;return()=>{var t;const{dot:o,badge:s}=e,{activeColor:i,inactiveColor:c}=n.props,d=r.value?i:c;return l("div",{role:"tab",class:ke({active:r.value}),style:{color:d},tabindex:0,"aria-selected":r.value,onClick:f},[l(le,u({dot:o,class:ke("icon"),content:s},e.badgeProps),{default:v}),l("div",{class:ke("text")},[null==(t=a.default)?void 0:t.call(a,{active:r.value})])])}}})),Be=i({name:"TopBar",__name:"topBar",setup(e){const t=f();return(e,a)=>{const o=Y,s=ve,n=de;return v(),p(n,{ref:"stickyRef"},{default:m((()=>{var e;return[l(s,{title:null==(e=h(t).meta)?void 0:e.title},{left:m((()=>[l(o,{name:"arrow-left",size:"18",onClick:a[0]||(a[0]=e=>{x.back()})})])),_:1},8,["title"])]})),_:1},512)}}}),ye=i({name:"BottomBar",__name:"bottomBar",setup:e=>(e,t)=>{const a=we,o=be;return v(),p(o,{ref:"tabbarRef",route:""},{default:m((()=>[(v(!0),b(g,null,k(h(w),(e=>{var t,o;return v(),b(g,{key:e.name},[(null==(t=e.meta)?void 0:t.tabbar)?(v(),p(a,{key:0,to:e.path,icon:null==(o=e.meta)?void 0:o.icon},{default:m((()=>{var t;return[B(y(null==(t=e.meta)?void 0:t.title),1)]})),_:2},1032,["to","icon"])):_("",!0)],64)})),128))])),_:1},512)}}),_e={class:"container"},Ie=D(i({name:"Layout",__name:"index",setup(t){T((e=>({d90db23c:i.value})));const o=f(),s=e(),n=e(),i=e("");return a((()=>{var e,t,a;i.value="".concat((null==(t=null==(e=s.value)?void 0:e.$el)?void 0:t.offsetHeight)+(null==(a=n.value)?void 0:a.$el.offsetHeight),"px")})),(e,t)=>{var a;const i=C("router-view");return v(),b(g,null,[l(Be,{ref_key:"topBarRef",ref:s},null,512),I("div",_e,[l(i,null,{default:m((({Component:e})=>[(v(),p(z,null,[(v(),p(A(e)))],1024))])),_:1})]),(null==(a=h(o).meta)?void 0:a.tabbar)?(v(),p(ye,{key:0,ref_key:"bottomBarRef",ref:n},null,512)):_("",!0)],64)}}}),[["__scopeId","data-v-f8653c3b"]]);export{Ie as default};
